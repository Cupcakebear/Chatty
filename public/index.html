<!DOCTYPE html>
<html lang="en">

 <head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <meta http-equiv="X-UA-Compatible" content="ie=edge" />
   <title>Socket.io Example</title>
   
 </head>

 <body>
   <h1>Our Socket.io Chat Application</h1>
   <div>
     <h2>Messages</h2>
     <ul></ul>
   </div>
   <form id = "form">
     <input type="text" />
     <button type = "submit" >Send</button>
   </form>

<script src="/socket.io/socket.io.js"></script>
<script>
  const form = document.querySelector("form");
messageList = document.querySelector("ul");

const socket = io();
const buttonSend = document.getElementById("submit");


function sendMessage(e){
  var input = document.querySelector("input");
  e.preventDefault();
  socket.emit("message", input.value); //emits "message"
  input.value = "";
}
// looks for button click to send message
form.addEventListener("submit", sendMessage);
// function to put message on website
function addMessageToHTML(message){
    const li = document.createElement("li");
    li.innerText = message;
    messageList.append(li);
}
// recieves emits from server to know that we have to write a message
socket.on("message", (data) => {
  addMessageToHTML(data);
}); 
// function to say user connected
function alertUserConnected(){
  addMessageToHTML("User Connected");
}
// checks for server to emit connection
socket.on("user connected", alertUserConnected);
</script>

  </body>
</html>